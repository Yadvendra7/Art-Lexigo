{"ast":null,"code":"var _jsxFileName = \"/Users/yadvendrayadav/Desktop/nft-marketplace/src/frontend/components/MyListedItems.js\";\nimport { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Row, Col, Card } from 'react-bootstrap';\nimport React from 'react';\nfunction renderSoldItems(items) {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }\n  }, \"Sold\"), /*#__PURE__*/React.createElement(Row, {\n    xs: 1,\n    md: 2,\n    lg: 4,\n    className: \"g-4 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 7\n    }\n  }, items.map((item, idx) => /*#__PURE__*/React.createElement(Col, {\n    key: idx,\n    className: \"overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    src: item.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Card.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 15\n    }\n  }, \"For \", ethers.utils.formatEther(item.totalPrice), \" ETH - Recieved \", ethers.utils.formatEther(item.price), \" ETH\"))))));\n}\nexport default function MyListedItems(_ref) {\n  let {\n    marketplace,\n    nft,\n    account\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [listedItems, setListedItems] = useState([]);\n  const [soldItems, setSoldItems] = useState([]);\n  const loadListedItems = async () => {\n    // Load all sold items that the user listed\n    const itemCount = await marketplace.itemCount();\n    let listedItems = [];\n    let soldItems = [];\n    for (let indx = 1; indx <= itemCount; indx++) {\n      const i = await marketplace.items(indx);\n      if (i.seller.toLowerCase() === account) {\n        // get uri url from nft contract\n        const uri = await nft.tokenURI(i.tokenId);\n        // use uri to fetch the nft metadata stored on ipfs \n        const response = await fetch(uri);\n        const metadata = await response.json();\n        // get total price of item (item price + fee)\n        const totalPrice = await marketplace.getTotalPrice(i.itemId);\n        // define listed item object\n        let item = {\n          totalPrice,\n          price: i.price,\n          itemId: i.itemId,\n          name: metadata.name,\n          description: metadata.description,\n          image: metadata.image\n        };\n        listedItems.push(item);\n        // Add listed item to sold items array if sold\n        if (i.sold) soldItems.push(item);\n      }\n    }\n    setLoading(false);\n    setListedItems(listedItems);\n    setSoldItems(soldItems);\n  };\n  useEffect(() => {\n    loadListedItems();\n  }, [listedItems]);\n  if (loading) return /*#__PURE__*/React.createElement(\"main\", {\n    style: {\n      padding: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Loading...\"));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, listedItems.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-5 py-3 container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \"Listed\"), /*#__PURE__*/React.createElement(Row, {\n    xs: 1,\n    md: 2,\n    lg: 4,\n    className: \"g-4 py-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, listedItems.map((item, idx) => /*#__PURE__*/React.createElement(Col, {\n    key: idx,\n    className: \"overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    src: item.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Card.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }, ethers.utils.formatEther(item.totalPrice), \" ETH\"))))), soldItems.length > 0 && renderSoldItems(soldItems)) : /*#__PURE__*/React.createElement(\"main\", {\n    style: {\n      padding: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, \"No listed assets\")));\n}","map":{"version":3,"names":["useState","useEffect","ethers","Row","Col","Card","React","renderSoldItems","items","createElement","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","xs","md","lg","className","map","item","idx","key","Img","variant","src","image","Footer","utils","formatEther","totalPrice","price","MyListedItems","_ref","marketplace","nft","account","loading","setLoading","listedItems","setListedItems","soldItems","setSoldItems","loadListedItems","itemCount","indx","i","seller","toLowerCase","uri","tokenURI","tokenId","response","fetch","metadata","json","getTotalPrice","itemId","name","description","push","sold","style","padding","length"],"sources":["/Users/yadvendrayadav/Desktop/nft-marketplace/src/frontend/components/MyListedItems.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { ethers } from \"ethers\"\nimport { Row, Col, Card } from 'react-bootstrap'\nimport React from 'react'\n\nfunction renderSoldItems(items) {\n  return (\n    <>\n      <h2>Sold</h2>\n      <Row xs={1} md={2} lg={4} className=\"g-4 py-3\">\n        {items.map((item, idx) => (\n          <Col key={idx} className=\"overflow-hidden\">\n            <Card>\n              <Card.Img variant=\"top\" src={item.image} />\n              <Card.Footer>\n                For {ethers.utils.formatEther(item.totalPrice)} ETH - Recieved {ethers.utils.formatEther(item.price)} ETH\n              </Card.Footer>\n            </Card>\n          </Col>\n        ))}\n      </Row>\n    </>\n  )\n}\n\nexport default function MyListedItems({ marketplace, nft, account }) {\n  const [loading, setLoading] = useState(true)\n  const [listedItems, setListedItems] = useState([])\n  const [soldItems, setSoldItems] = useState([])\n  const loadListedItems = async () => {\n    // Load all sold items that the user listed\n    const itemCount = await marketplace.itemCount()\n    let listedItems = []\n    let soldItems = []\n    for (let indx = 1; indx <= itemCount; indx++) {\n      const i = await marketplace.items(indx)\n      if (i.seller.toLowerCase() === account) {\n        // get uri url from nft contract\n        const uri = await nft.tokenURI(i.tokenId)\n        // use uri to fetch the nft metadata stored on ipfs \n        const response = await fetch(uri)\n        const metadata = await response.json()\n        // get total price of item (item price + fee)\n        const totalPrice = await marketplace.getTotalPrice(i.itemId)\n        // define listed item object\n        let item = {\n          totalPrice,\n          price: i.price,\n          itemId: i.itemId,\n          name: metadata.name,\n          description: metadata.description,\n          image: metadata.image\n        }\n        listedItems.push(item)\n        // Add listed item to sold items array if sold\n        if (i.sold) soldItems.push(item)\n      }\n    }\n    setLoading(false)\n    setListedItems(listedItems)\n    setSoldItems(soldItems)\n  }\n  useEffect(() => {\n    loadListedItems()\n  }, [listedItems])\n  if (loading) return (\n    <main style={{ padding: \"1rem 0\" }}>\n      <h2>Loading...</h2>\n    </main>\n  )\n  return (\n    <div className=\"flex justify-center\">\n      {listedItems.length > 0 ?\n        <div className=\"px-5 py-3 container\">\n            <h2>Listed</h2>\n          <Row xs={1} md={2} lg={4} className=\"g-4 py-3\">\n            {listedItems.map((item, idx) => (\n              <Col key={idx} className=\"overflow-hidden\">\n                <Card>\n                  <Card.Img variant=\"top\" src={item.image} />\n                  <Card.Footer>{ethers.utils.formatEther(item.totalPrice)} ETH</Card.Footer>\n                </Card>\n              </Col>\n            ))}\n          </Row>\n            {soldItems.length > 0 && renderSoldItems(soldItems)}\n        </div>\n        : (\n          <main style={{ padding: \"1rem 0\" }}>\n            <h2>No listed assets</h2>\n          </main>\n        )}\n    </div>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}