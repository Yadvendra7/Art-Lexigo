{"ast":null,"code":"var _jsxFileName = \"/Users/yadvendrayadav/Desktop/nft-marketplace/src/frontend/components/Home.js\";\nimport { useState, useEffect } from 'react';\nimport { ethers } from \"ethers\";\nimport { Row, Col, Card, Button } from 'react-bootstrap';\nimport React from 'react';\nconst Home = _ref => {\n  let {\n    marketplace,\n    nft\n  } = _ref;\n  const [loading, setLoading] = useState(true);\n  const [items, setItems] = useState([]);\n  const loadMarketplaceItems = async () => {\n    // Load all unsold items\n    const itemCount = await marketplace.itemCount();\n    let items = [];\n    for (let i = 1; i <= itemCount; i++) {\n      const item = await marketplace.items(i);\n      if (!item.sold) {\n        // get uri url from nft contract\n        const uri = await nft.tokenURI(item.tokenId);\n        // use uri to fetch the nft metadata stored on ipfs \n        const response = await fetch(uri);\n        const metadata = await response.json();\n        // get total price of item (item price + fee)\n        const totalPrice = await marketplace.getTotalPrice(item.itemId);\n        // Add item to items array\n        items.push({\n          totalPrice,\n          itemId: item.itemId,\n          seller: item.seller,\n          name: metadata.name,\n          description: metadata.description,\n          image: metadata.image\n        });\n      }\n    }\n    setLoading(false);\n    setItems(items);\n  };\n  const buyMarketItem = async item => {\n    await (await marketplace.purchaseItem(item.itemId, {\n      value: item.totalPrice\n    })).wait();\n    loadMarketplaceItems();\n  };\n  useEffect(() => {\n    loadMarketplaceItems();\n  }, []);\n  if (loading) return /*#__PURE__*/React.createElement(\"main\", {\n    style: {\n      padding: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Loading...\"));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, items.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"px-5 container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    xs: 1,\n    md: 2,\n    lg: 4,\n    className: \"g-4 py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, items.map((item, idx) => /*#__PURE__*/React.createElement(Col, {\n    key: idx,\n    className: \"overflow-hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card.Img, {\n    variant: \"top\",\n    src: item.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Card.Body, {\n    color: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  }, item.name), /*#__PURE__*/React.createElement(Card.Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 21\n    }\n  }, item.description)), /*#__PURE__*/React.createElement(Card.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => buyMarketItem(item),\n    variant: \"primary\",\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 23\n    }\n  }, \"Buy for \", ethers.utils.formatEther(item.totalPrice), \" ETH\")))))))) : /*#__PURE__*/React.createElement(\"main\", {\n    style: {\n      padding: \"1rem 0\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, \"No listed assets\")));\n};\nexport default Home;","map":{"version":3,"names":["useState","useEffect","ethers","Row","Col","Card","Button","React","Home","_ref","marketplace","nft","loading","setLoading","items","setItems","loadMarketplaceItems","itemCount","i","item","sold","uri","tokenURI","tokenId","response","fetch","metadata","json","totalPrice","getTotalPrice","itemId","push","seller","name","description","image","buyMarketItem","purchaseItem","value","wait","createElement","style","padding","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","length","xs","md","lg","map","idx","key","Img","variant","src","Body","color","Title","Text","Footer","onClick","size","utils","formatEther"],"sources":["/Users/yadvendrayadav/Desktop/nft-marketplace/src/frontend/components/Home.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { ethers } from \"ethers\"\nimport { Row, Col, Card, Button } from 'react-bootstrap'\nimport React from 'react'\n\nconst Home = ({ marketplace, nft }) => {\n  const [loading, setLoading] = useState(true)\n  const [items, setItems] = useState([])\n  const loadMarketplaceItems = async () => {\n    // Load all unsold items\n    const itemCount = await marketplace.itemCount()\n    let items = []\n    for (let i = 1; i <= itemCount; i++) {\n      const item = await marketplace.items(i)\n      if (!item.sold) {\n        // get uri url from nft contract\n        const uri = await nft.tokenURI(item.tokenId)\n        // use uri to fetch the nft metadata stored on ipfs \n        const response = await fetch(uri)\n        const metadata = await response.json()\n        // get total price of item (item price + fee)\n        const totalPrice = await marketplace.getTotalPrice(item.itemId)\n        // Add item to items array\n        items.push({\n          totalPrice,\n          itemId: item.itemId,\n          seller: item.seller,\n          name: metadata.name,\n          description: metadata.description,\n          image: metadata.image\n        })\n      }\n    }\n    setLoading(false)\n    setItems(items)\n  }\n\n  const buyMarketItem = async (item) => {\n    await (await marketplace.purchaseItem(item.itemId, { value: item.totalPrice })).wait()\n    loadMarketplaceItems()\n  }\n\n  useEffect(() => {\n    loadMarketplaceItems()\n  }, [])\n  if (loading) return (\n    <main style={{ padding: \"1rem 0\" }}>\n      <h2>Loading...</h2>\n    </main>\n  )\n  return (\n    <div className=\"flex justify-center\">\n      {items.length > 0 ?\n        <div className=\"px-5 container\">\n          <Row xs={1} md={2} lg={4} className=\"g-4 py-5\">\n            {items.map((item, idx) => (\n              <Col key={idx} className=\"overflow-hidden\">\n                <Card>\n                  <Card.Img variant=\"top\" src={item.image} />\n                  <Card.Body color=\"secondary\">\n                    <Card.Title>{item.name}</Card.Title>\n                    <Card.Text>\n                      {item.description}\n                    </Card.Text>\n                  </Card.Body>\n                  <Card.Footer>\n                    <div className='d-grid'>\n                      <Button onClick={() => buyMarketItem(item)} variant=\"primary\" size=\"lg\">\n                        Buy for {ethers.utils.formatEther(item.totalPrice)} ETH\n                      </Button>\n                    </div>\n                  </Card.Footer>\n                </Card>\n              </Col>\n            ))}\n          </Row>\n        </div>\n        : (\n          <main style={{ padding: \"1rem 0\" }}>\n            <h2>No listed assets</h2>\n          </main>\n        )}\n    </div>\n  );\n}\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}