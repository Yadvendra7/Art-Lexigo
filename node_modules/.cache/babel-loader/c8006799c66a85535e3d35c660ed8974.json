{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar cid = require('multiformats/cid');\nvar configure = require('../lib/configure.js');\nvar normaliseInput = require('ipfs-core-utils/pins/normalise-input');\nvar toUrlSearchParams = require('../lib/to-url-search-params.js');\nconst createAddAll = configure.configure(api => {\n  async function* addAll(source) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    for await (const {\n      path,\n      recursive,\n      metadata\n    } of normaliseInput.normaliseInput(source)) {\n      const res = await api.post('pin/add', {\n        signal: options.signal,\n        searchParams: toUrlSearchParams.toUrlSearchParams({\n          ...options,\n          arg: path,\n          recursive,\n          metadata: metadata ? JSON.stringify(metadata) : undefined,\n          stream: true\n        }),\n        headers: options.headers\n      });\n      for await (const pin of res.ndjson()) {\n        if (pin.Pins) {\n          for (const cid$1 of pin.Pins) {\n            yield cid.CID.parse(cid$1);\n          }\n          continue;\n        }\n        yield cid.CID.parse(pin);\n      }\n    }\n  }\n  return addAll;\n});\nexports.createAddAll = createAddAll;","map":null,"metadata":{},"sourceType":"script"}